{% extends "base.html" %}

{% block title %} Sprints {% endblock %}

{% block content %}

<body>
{% if 41 in out or request.user.is_superuser %}
<p class="display-3" style="margin-left:550px;"><a class="button-create" href="{% url 'add-user_story' id_project %}">Agregar User Story</a></p>
{% endif %}
<div>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
              const rows = document.querySelectorAll("tr[data-href]");
              rows.forEach( row => {
                row.addEventListener("click", () =>{
                  window.location.href = row.dataset.href;
                });
              });
            });
        </script>
        <table class="table table-striped table-hover" border="5px solid #000;" style="margin-top:30px;">
                <thead class="thead-dark">
                    <tr>
                      <th>Nombre</th>
                      <th>Descripci√≥n</th>
                      <th>Horas Estimadas</th>
                      <th>Prioridad de us</th>
                      <th>Encargado</th>
                    </tr>
                </thead>
            {% for p in user_story_list %}
                {% if id_project == p.id_proyecto_id %}
                <tr scope="row" data-href="{% url 'add-user_story' id_project %}"
                    style="tr:hover {background-color: #77bdff;}">
                    <td style="padding:10px;">{{p.nombre_us}}</td>
                    <td style="padding:10px;">{{p.desc_us}}</td>
                    <td style="padding:10px;">{{p.horas_estimadas}}</td>
                    <td style="padding:10px;">{{p.prioridad_us}}</td>
                    <td style="padding:10px;">{{p.encargado}}</td>
                    {% if 42 in out or request.user.is_superuser %}
                    <td style="padding:10px;"><a href="{% url 'update-user_story' id_project p.id %}">Edit</a></td>
                    {% endif %}
                </tr>

                {% endif %}

            {% endfor %}
        </table>
    </div>
</body>
 
{% endblock %}